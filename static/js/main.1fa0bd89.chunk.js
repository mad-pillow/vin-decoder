(this["webpackJsonpvin-decoder"]=this["webpackJsonpvin-decoder"]||[]).push([[0],{18:function(e,t,a){},23:function(e,t,a){},24:function(e,t,a){},26:function(e,t,a){},27:function(e,t,a){},28:function(e,t,a){},29:function(e,t,a){},30:function(e,t,a){},31:function(e,t,a){},32:function(e,t,a){},34:function(e,t,a){"use strict";a.r(t);a(18);var n=a(1),s=a(16),c=a.n(s),r=a(7),i=a(8),l=a(12),o=a(11),u=(a(23),a(24),a(4)),h=a(0),b=function(e){Object(l.a)(a,e);var t=Object(o.a)(a);function a(){var e;return Object(r.a)(this,a),(e=t.call(this)).toggleNavMenu=function(){e.state.isMenuClose?e.setState({isMenuClose:!1}):e.setState({isMenuClose:!0})},e.closeNavMenu=function(){e.setState({isMenuClose:!0})},e.state={isMenuClose:!0},e}return Object(i.a)(a,[{key:"render",value:function(){var e="";return this.state.isMenuClose?(e=" header__nav-container--closed",document.body.style.overflow="auto"):document.body.style.overflow="hidden",Object(h.jsxs)("header",{className:"header",children:[Object(h.jsx)("div",{className:"header__logo-container",children:Object(h.jsx)(u.b,{className:"header__logo-link",to:"/",children:"VIN DECODER"})}),Object(h.jsx)("nav",{className:"header__nav-container".concat(e),onClick:this.closeNavMenu,children:Object(h.jsxs)("ul",{className:"header__nav-list",children:[Object(h.jsx)("li",{className:"header__nav-item",children:Object(h.jsx)(u.b,{to:"/",className:"header__nav-link",children:"Main page"})}),Object(h.jsx)("li",{className:"header__nav-item",children:Object(h.jsx)(u.b,{to:"/variables",className:"header__nav-link",children:"Variables"})})]})}),Object(h.jsx)("div",{className:"header__menu-btn-container",onClick:this.toggleNavMenu,children:Object(h.jsx)("span",{className:"header__menu-btn"})})]})}}]),a}(n.Component),j=a(9),d=(a(26),a(27),a(2));function f(e){var t,a=["Header 1","Header 2"],n=Object(d.f)(),s=e.info,c=e.isNavigable,r=c?" info__row--clickable":"";return s||Array.isArray(s)?(a=Object.keys(s[0]).map((function(e,t){return Object(h.jsx)("th",{className:"info__header",children:e},t)})),t=s.map((function(e,t){var a=Object.values(e).map((function(e,t){return Object(h.jsx)("td",{className:"info__data",dangerouslySetInnerHTML:{__html:e}},t)}));return Object(h.jsx)("tr",{className:"info__row".concat(r),onClick:function(){var t;t="".concat(e.Id),c&&n(t)},children:a},t)})),Object(h.jsx)("div",{className:"info__container",children:Object(h.jsx)("table",{className:"info__table",children:Object(h.jsxs)("tbody",{children:[Object(h.jsx)("tr",{className:"info__row",children:a}),t]})})})):Object(h.jsx)("p",{children:"If you like to get description of a car by its VIN code enter the code above"})}a(28);function v(){return Object(h.jsx)("div",{className:"spinner__container",children:Object(h.jsx)("div",{className:"loadingio-spinner-dual-ball-4ss68ps5fu9",children:Object(h.jsxs)("div",{className:"ldio-np3unrjzfxn",children:[Object(h.jsx)("div",{}),Object(h.jsx)("div",{}),Object(h.jsx)("div",{})]})})})}var O=a(17),g=(a(29),function(e){Object(l.a)(a,e);var t=Object(o.a)(a);function a(e){var s;return Object(r.a)(this,a),(s=t.call(this,e)).handleSubmit=function(e){e.preventDefault();if(/^([A-Z0-9])*$/gi.test(s.state.currentVIN)){s.setState({isVinCorrect:!0}),s.props.handleActiveVIN(s.state.currentVIN);var t=Object(O.a)(s.props.VINList),a=t[t.length-1];s.props.VINList.includes(s.state.currentVIN)?t=t.filter((function(e){return e!==s.state.currentVIN})):s.props.handleCarDataList(a),t.unshift(s.state.currentVIN),t.splice(5),s.props.handleVINList(t)}else s.setState({isVinCorrect:!1});s.VINInputRef.current.focus(),s.VINInputRef.current.value=""},s.handleChange=function(e){s.setState({currentVIN:e.target.value.toUpperCase()})},s.VINInputRef=Object(n.createRef)(),s.state={currentVIN:"",isVinCorrect:!0},s}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.props.VINList.map((function(t,a){var n=t||"Empty slot";return Object(h.jsxs)("li",{"data-value":n,className:"vin-code__history-item",onClick:function(t){e.props.handleVINListChoose(t),e.setState({isVinCorrect:!0})},children:[" ",n]},a)})),a=this.state.isVinCorrect?"Enter VIN":"Letters and Digits only!";return Object(h.jsxs)("div",{className:"vin-code__container",children:[Object(h.jsx)("div",{className:"vin-code__request-block",children:Object(h.jsxs)("form",{className:"vin-code__request-form",onSubmit:this.handleSubmit,children:[Object(h.jsx)("div",{children:Object(h.jsx)("input",{type:"text",className:"vin-code__request-input",ref:this.VINInputRef,minLength:"17",maxLength:"17",placeholder:a,onChange:this.handleChange})}),Object(h.jsx)("button",{type:"submit",className:"vin-code__request-btn",children:"Request VIN"})]})}),Object(h.jsx)("div",{className:"vin-code__history-block",children:Object(h.jsx)("ul",{className:"vin-code__history-list",children:t})})]})}}]),a}(n.Component));a(30);function p(e){var t=e.fetchMessage;return null===e.isFetching?null:Object(h.jsx)("div",{className:"fetch-message__container",children:Object(h.jsx)("p",{className:"fetch-message__message",children:t})})}function m(e){var t=e.preventCarInfoFetchMsg;return Object(n.useLayoutEffect)((function(){return function(){t()}}),[t]),Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(g,Object(j.a)({},e)),Object(h.jsx)(N,Object(j.a)({},e))]})}function N(e){return e.carDataFetching?Object(h.jsx)(v,{}):Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(f,{info:e.infoCarData}),Object(h.jsx)(p,{fetchMessage:e.fetchCarDataMessage,isFetching:e.carDataFetching})]})}a(31);function x(e){var t=e.infoVariables,a=e.variablesFetching,s=e.fetchVariablesMessage,c=e.preventVariablesFetchMsg;return Object(n.useLayoutEffect)((function(){return function(){c()}}),[c]),a?Object(h.jsx)(v,{}):Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("h2",{className:"page-title",children:"You can find the list of all available VIN decryption variables below:"}),Object(h.jsx)(f,{info:t,isNavigable:!0}),Object(h.jsx)(p,{fetchMessage:s,isFetching:a})]})}var V=a(5),_=(a(32),a(6)),I=a.n(_),C=a(14),D=function(){function e(){Object(r.a)(this,e),this.API_URL="https://vpic.nhtsa.dot.gov/api/vehicles/",this.getCarData=this.getCarData.bind(this),this.getVariables=this.getVariables.bind(this)}return Object(i.a)(e,[{key:"getData",value:function(){var e=Object(C.a)(I.a.mark((function e(t){var a;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:if((a=e.sent).ok){e.next=5;break}throw new Error("Cannot fetch data from ".concat(t,". Status - ").concat(a.status));case 5:return e.next=7,a.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getCarData",value:function(){var e=Object(C.a)(I.a.mark((function e(t){var a,n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getData("".concat(this.API_URL,"decodevin/").concat(t,"?format=json"));case 2:return a=e.sent,n=(n=a.Results.map((function(e){return{Variable:e.Variable,Value:e.Value}}))).filter((function(e){return e.Value})),e.abrupt("return",{message:a.Message,carData:n});case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getVariables",value:function(){var e=Object(C.a)(I.a.mark((function e(){var t,a;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getData("".concat(this.API_URL,"getvehiclevariablelist?format=json"));case 2:return t=e.sent,a=t.Results.map((function(e){return{Id:e.ID,Name:e.Name,Description:e.Description}})),e.abrupt("return",{message:t.Message,variables:a});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getVariableDetails",value:function(){var e=Object(C.a)(I.a.mark((function e(t){var a,n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getData("".concat(this.API_URL,"getvehiclevariablelist?format=json"));case 2:return a=e.sent,n={},a.Results.forEach((function(e){e.ID!==Number(t)||(n=Object.assign({},e))})),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),L=D;function y(e){e.infoVariables,e.preventVariablesFetchMsg;var t=Object(d.g)().id,a=Object(n.useState)({}),s=Object(V.a)(a,2),c=s[0],r=s[1],i=Object(n.useState)(!1),l=Object(V.a)(i,2),o=l[0],u=l[1];Object(n.useEffect)((function(e){var a=new L;u(!0),a.getVariableDetails(t).then((function(e){r(e),u(!1)}))}),[t]);var b=Object.keys(c).map((function(e,t){return Object(h.jsxs)("tr",{className:"details__row",children:[Object(h.jsx)("td",{className:"details__data",children:e}),Object(h.jsx)("td",{className:"details__data",dangerouslySetInnerHTML:{__html:c[e]}})]},t)}));return o?Object(h.jsx)(v,{}):Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("h2",{className:"page-title",children:"Details for the variable with Id ".concat(t," as follows:")}),Object(h.jsx)("div",{className:"details__container",children:Object(h.jsx)("table",{className:"details__table",children:Object(h.jsx)("tbody",{children:b})})})]})}function S(e){return Object(h.jsx)("main",{className:"main-container",children:Object(h.jsxs)(d.c,{children:[Object(h.jsx)(d.a,{exact:!0,path:"/",element:Object(h.jsx)(m,Object(j.a)({},e))}),Object(h.jsx)(d.a,{exact:!0,path:"/variables",element:Object(h.jsx)(x,Object(j.a)({},e))}),Object(h.jsx)(d.a,{exact:!0,path:"/variables/:id",element:Object(h.jsx)(y,Object(j.a)({},e))})]})})}var M=function(e){Object(l.a)(a,e);var t=Object(o.a)(a);function a(){var e;return Object(r.a)(this,a),(e=t.call(this)).handleVariables=function(){e.setState({variablesFetching:!0}),e.vinService.getVariables().then((function(t){e.setState({variables:t.variables,fetchVariablesMessage:t.message,variablesFetching:!1})}))},e.preventVariablesFetchMsg=function(){e.setState({variablesFetching:null})},e.handleCarInfo=function(t){e.state.VINList.includes(t)||(e.setState({carDataFetching:!0}),e.vinService.getCarData(t).then((function(a){var n=JSON.parse(JSON.stringify(e.state.carDataList));n[t]=a.carData,localStorage.setItem("CarDataList",JSON.stringify(n)),e.setState({carDataList:n,fetchCarDataMessage:a.message,carDataFetching:!1})})))},e.preventCarInfoFetchMsg=function(){e.setState({carDataFetching:null})},e.handleCarDataList=function(t){var a=JSON.parse(JSON.stringify(e.state.carDataList));delete a[t],e.setState({carDataList:a})},e.handleVINList=function(t){localStorage.setItem("VINList",JSON.stringify(t)),e.setState({VINList:t})},e.handleActiveVIN=function(t){e.setState({activeVIN:t}),e.handleCarInfo(t)},e.handleVINListChoose=function(t){var a=t.target.dataset.value,n=e.state.VINList;a&&"Empty slot"!==a&&((n=n.filter((function(e){return e!==a}))).unshift(a),localStorage.setItem("VINList",JSON.stringify(n)),e.setState({VINList:n}),e.handleActiveVIN(n[0]))},e.vinService=new L,e.handleVariables(),e.state={activeVIN:"",VINList:JSON.parse(localStorage.getItem("VINList"))||[null,null,null,null,null],carDataList:JSON.parse(localStorage.getItem("CarDataList"))||{},fetchCarDataMessage:"",carDataFetching:null,variables:[],fetchVariablesMessage:"",variablesFetching:null},e}return Object(i.a)(a,[{key:"render",value:function(){return Object(h.jsxs)("div",{className:"wrapper",children:[Object(h.jsx)(b,{}),Object(h.jsx)(S,{infoCarData:this.state.carDataList[this.state.activeVIN],infoVariables:this.state.variables,fetchVariablesMessage:this.state.fetchVariablesMessage,fetchCarDataMessage:this.state.fetchCarDataMessage,variablesFetching:this.state.variablesFetching,carDataFetching:this.state.carDataFetching,handleVINList:this.handleVINList,handleActiveVIN:this.handleActiveVIN,handleVINListChoose:this.handleVINListChoose,VINList:this.state.VINList,handleCarDataList:this.handleCarDataList,preventCarInfoFetchMsg:this.preventCarInfoFetchMsg,preventVariablesFetchMsg:this.preventVariablesFetchMsg})]})}}]),a}(n.Component);c.a.render(Object(h.jsx)(u.a,{children:Object(h.jsx)(M,{})}),document.getElementById("root"))}},[[34,1,2]]]);
//# sourceMappingURL=main.1fa0bd89.chunk.js.map